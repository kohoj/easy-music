var M=Object.defineProperty,N=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var k=(s,t,a)=>t in s?M(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,D=(s,t)=>{for(var a in t||(t={}))R.call(t,a)&&k(s,a,t[a]);if(w)for(var a of w(t))U.call(t,a)&&k(s,a,t[a]);return s},L=(s,t)=>N(s,B(t));import{u as V,b as z,r as F,x as P,a8 as j,t as E,p as Y,a as G,e as h,o as m,f as u,g as e,j as c,i as n,F as $,h as C,k as y,m as H,w as J}from"./vendor.a7e3494f.js";import{f as K}from"./song.122b202a.js";import{_ as O}from"./index.e9f38bbb.js";import{_ as Q}from"./Comments.80d04656.js";const T={name:"albumDetail",components:{SongList:O,CommentList:Q},setup(s){const{proxy:t}=H(),a=V(),r=z(),o=F({albumId:"",details:null,songList:[],dynamic:{},hotAlbums:[],comments:[],type:3,isShowDesc:!1}),A=async l=>{const{data:d}=await t.$http.album(l);if(d.code!==200)return t.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.details=d.album,o.songList=v(d.songs),p()},b=async l=>{const{data:d}=await t.$http.albumDynamic(l);if(d.code!==200)return t.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.dynamic=d},p=async()=>{const{data:l}=await t.$http.artistAlbum({id:o.details.artists[0].id,limit:5});if(l.code!==200)return t.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.hotAlbums=l.hotAlbums},f=()=>{o.details.description.length>120&&(o.isShowDesc=!o.isShowDesc)},g=()=>{a.dispatch("playAll",{list:o.songList}),a.commit("SET_PLAYLISTTIPS",!0)},i=async()=>{const{data:l}=await t.$http.albumSub({id:o.albumId,t:Number(!o.dynamic.isSub)});if(l.code!==200)return t.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.dynamic.isSub=Number(!o.dynamic.isSub)},v=l=>{const d=[];return l.map((S,q)=>{S.id&&(S.license=!l[q].privilege.cp,d.push(K(S)))}),d},I=()=>{A({id:o.albumId}),b({id:o.albumId})};return P(()=>{o.albumId=r.query.id,I()}),j(l=>{o.albumId=l.query.id,I()}),L(D({},E(o)),{showAllDesc:f,playAllSongs:g,subAlbum:i})}},_=J();Y("data-v-b15025ac");const W={key:0,class:"album"},X={class:"w1200"},Z={class:"album-cover"},x={class:"album-img"},ss=e("div",{slot:"placeholder",class:"image-slot"},[e("i",{class:"iconfont icon-placeholder"})],-1),es={class:"album-info"},ts={class:"album-title"},os={class:"album-singer"},is=c("\u6B4C\u624B\uFF1A"),as={class:"album-time"},ls={class:"album-company"},ns={key:0,class:"album-desc"},ds=c("\u6B4C\u5355\u7B80\u4ECB"),cs=e("i",{class:"iconfont icon-closed"},null,-1),rs={key:0,class:"album-desc-all"},ms={class:"detail-container"},us={class:"detail-main"},_s={class:"song-header"},ps=c("\u5305\u542B\u6B4C\u66F2\u5217\u8868 "),bs=e("i",{class:"iconfont icon-audio-play"},null,-1),hs=c(" \u64AD\u653E\u5168\u90E8"),ys={class:"album-comments",ref:"comment"},fs={class:"detail-aside"},gs={class:"aside-title"},vs=c("\u5168\u90E8>>"),Ss={class:"aside-main aside-album-main"},As=e("div",{slot:"placeholder",class:"image-slot"},[e("i",{class:"iconfont icon-placeholder"})],-1),Is={class:"aside-album-info"},ws={class:"aside-album-name"},ks={class:"aside-album-time"};G();const Ds=_((s,t,a,r,o,A)=>{const b=h("el-image"),p=h("router-link"),f=h("song-list"),g=h("comment-list");return s.details?(m(),u("div",W,[e("div",X,[e("div",Z,[e("div",x,[e(b,{src:s.details.picUrl},{default:_(()=>[ss]),_:1},8,["src"])]),e("div",es,[e("div",ts,[c(n(s.details.name)+" ",1),e("span",null,n("#"+s.details.type),1)]),e("div",os,[is,(m(!0),u($,null,C(s.details.artists,(i,v)=>(m(),u(p,{to:{path:"/singer",query:{id:i.id}},class:"song_name",key:i.name},{default:_(()=>[c(n(v!==0?" / "+i.name:i.name),1)]),_:2},1032,["to"]))),128))]),e("div",as,"\u53D1\u884C\u65F6\u95F4\uFF1A"+n(s.$utils.formartDate(s.details.publishTime,"yyyy-MM-dd")),1),e("div",ls,"\u53D1\u884C\u516C\u53F8\uFF1A"+n(s.details.company),1),s.details.description?(m(),u("div",ns,[e("h5",null,[ds,s.isShowDesc?(m(),u("em",{key:0,class:"desc-close",onClick:t[1]||(t[1]=i=>s.isShowDesc=!1)},[cs])):y("",!0)]),e("p",{onClick:t[2]||(t[2]=(...i)=>r.showAllDesc&&r.showAllDesc(...i))},n(s.details.description),1),s.isShowDesc?(m(),u("pre",rs,"                            "+n(s.details.description)+`\r
                        `,1)):y("",!0)])):y("",!0)])]),e("div",ms,[e("div",us,[e("div",_s,[e("h4",null,[ps,e("em",null,n(s.details.size+"\u9996\u6B4C"),1)]),e("span",{class:"play-all",onClick:t[3]||(t[3]=(...i)=>r.playAllSongs&&r.playAllSongs(...i))},[bs,hs]),e("span",{class:["collect",s.dynamic.isSub?"active":""],onClick:t[4]||(t[4]=(...i)=>r.subAlbum&&r.subAlbum(...i))},[e("i",{class:["iconfont","icon-collect"+(s.dynamic.isSub?"-active":"")]},null,2),c(" "+n(s.dynamic.isSub?"\u5DF2\u6536\u85CF":"\u6536\u85CF"),1)],2)]),e(f,{songList:s.songList,stripe:!0},null,8,["songList"]),e("div",ys,[e(g,{type:s.type,sId:s.albumId},null,8,["type","sId"])],512)]),e("div",fs,[e("h3",gs,[c(n(s.details.artists[0].name)+"\u7684\u5176\u4ED6\u4E13\u8F91",1),e(p,{to:{path:"/singer",query:{id:s.details.artists[0].id,type:"album"}},class:"album-more"},{default:_(()=>[vs]),_:1},8,["to"])]),e("div",Ss,[(m(!0),u($,null,C(s.hotAlbums,i=>(m(),u(p,{class:"aside-album-item",to:{path:"/album",query:{id:i.id}},key:i.id},{default:_(()=>[e(b,{src:i.picUrl},{default:_(()=>[As]),_:2},1032,["src"]),e("div",Is,[e("div",ws,n(i.name),1),e("div",ks,n(s.$utils.formartDate(s.details.publishTime,"yyyy-MM-dd")),1)])]),_:2},1032,["to"]))),128))])])])])])):y("",!0)});T.render=Ds;T.__scopeId="data-v-b15025ac";export{T as default};
