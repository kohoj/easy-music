var t=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(s,i,a)=>i in s?t(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a;import{_ as n}from"./Loading.076676db.js";import{_ as r}from"./index.80a54dc7.js";import{_ as c}from"./AlbumList.c674f628.js";import{_ as d}from"./MvList.e58cd9ee.js";import{c as u,b as m,r as g,x as p,t as v,p as f,a as b,e as h,a7 as y,o as w,f as A,g as L,i as k,k as _,j as M,q as S,v as D,F as C,h as $,m as j,w as O}from"./vendor.55e40976.js";const U={name:"Singer",components:{SongList:r,AlbumList:c,MvList:d,Loading:n},setup(t){const{proxy:n}=j(),r=u(),c=m(),d=g({sUid:"",artist:null,hotSongs:[],hotAlbums:[],hotMvs:[],introduction:[],type:"hot",limit:12,offset:0,total:0,timer:null,dialogDescVisible:!1,isLoading:!0,isLoadMv:!0,album_loading:!0,album_count:12,mv_count:20,mv_loading:!0}),f=async()=>{const{data:t}=await n.$http.artists({id:d.sUid,timestamp:(new Date).valueOf()});if(200!==t.code)return n.$msg.error("数据请求失败");d.artist=t.artist,d.hotSongs=t.hotSongs.map((t=>({id:String(t.id),name:t.name,mvId:t.mv,singer:t.ar,album:t.al,alia:t.alia,vip:1===t.fee,license:t.license,duration:n.$utils.formatSongTime(t.dt),url:`https://music.163.com/song/media/outer/url?id=${t.id}.mp3`,publishTime:n.$utils.formatMsgTime(t.publishTime)})))},b=async()=>{d.album_loading=!0;const{data:t}=await n.$http.artistAlbum({id:d.sUid,limit:d.limit,offset:d.offset});if(200!==t.code)return n.$msg.error("数据请求失败");d.total=t.artist.albumSize,d.hotAlbums=t.hotAlbums,d.album_loading=!1},h=async()=>{const{data:t}=await n.$http.artistMv({id:d.sUid,limit:20,offset:d.offset});if(200!==t.code)return n.$msg.error("数据请求失败");d.hotMvs=[...d.hotMvs,...t.mvs],d.isLoading=t.hasMore,d.isLoadMv=!t.hasMore,d.offset+=20,d.mv_loading=!1},y=()=>{switch(d.sUid=c.query.id,(async()=>{const{data:t}=await n.$http.artistDesc({id:d.sUid,timestamp:(new Date).valueOf()});if(200!==t.code)return n.$msg.error("数据请求失败");d.introduction=t.introduction})(),d.type){case"hot":f();break;case"album":b();break;case"mv":h()}};return p((()=>{d.sUid=c.query.id,d.type=c.query.type||"hot",y(),c.query.type&&f()})),w=((t,s)=>{for(var i in s||(s={}))e.call(s,i)&&o(t,i,s[i]);if(a)for(var i of a(s))l.call(s,i)&&o(t,i,s[i]);return t})({},v(d)),s(w,i({loadMv:()=>{h()},currentChange:t=>{d.offset=(t-1)*d.limit,b()},changeType:t=>{const s={id:d.sUid};switch(d.type=t,d.offset=0,d.type){case"hot":f();break;case"album":b();break;case"mv":d.hotMvs=[],d.mv_loading=!0,h()}"hot"!==t&&(s.type=d.type),r.push({path:"singer",query:s})},moreDesc:()=>{d.dialogDescVisible=!0},getArtistSub:async t=>{const{data:s}=await n.$http.artistSub({id:d.sUid,t:t});if(200!==s.code)return n.$msg.error("数据请求失败");n.$msg.success("操作成功"),f()},playAllSongs:()=>{store.dispatch("playAll",{list:d.songList})},addAll:()=>{store.dispatch("addList",{list:d.hotSongs})},collectAll:()=>{}}));var w},watch:{},beforeDestroy(){clearTimeout(this.timer)}},T=O();f("data-v-9dcef508");const V={key:0,class:"singer"},q={class:"w1200"},x={class:"singer-info"},I={class:"singer-avatar"},P=L("div",{slot:"placeholder",class:"image-slot"},[L("i",{class:"iconfont icon-placeholder"})],-1),z={class:"singer-desc"},E={class:"singer-author"},F={class:"singer-name"},B=L("i",{class:"iconfont icon-home"},null,-1),G=M(" 个人主页"),H={class:"singer-brief"},J={class:"singer-main"},K={class:"w1200"},N={class:"singer-hd"},Q=L("em",null,"作品集",-1),R={class:"singer-tab"},W={key:0,class:"singer-oper"},X=L("i",{class:"iconfont icon-audio-play"},null,-1),Y=M(" 播放全部"),Z=L("i",{class:"iconfont icon-add"},null,-1),tt=M(" 添加到播放列表"),st=L("i",{class:"iconfont icon-collect"},null,-1),it=M(" 收藏热门"),at={class:"singer-list"},et={class:"wrapper infinite-list","infinite-scroll-disabled":"isLoadMv","infinite-scroll-distance":"50"},lt={key:0,class:"pagination"},ot={class:"artist-desc-main"},nt={class:"introduction"},rt=L("dt",null,"艺人介绍",-1);b();const ct=T(((t,s,i,a,e,l)=>{const o=h("el-image"),n=h("router-link"),r=h("song-list"),c=h("album-list"),d=h("mv-list"),u=h("Loading"),m=h("el-pagination"),g=h("el-dialog"),p=y("infinite-scroll");return t.artist?(w(),A("div",V,[L("div",q,[L("div",x,[L("div",I,[L(o,{src:t.artist.img1v1Url},{default:T((()=>[P])),_:1},8,["src"])]),L("div",z,[L("div",E,[L("div",F,k(t.artist.name),1),t.artist.accountId?(w(),A(n,{key:0,class:"singer-btn singer-home",to:{path:"/user",query:{id:t.artist.accountId}}},{default:T((()=>[B,G])),_:1},8,["to"])):_("",!0),L("span",{class:["singer-btn","singer-collect",t.artist.followed?"active":""],onClick:s[1]||(s[1]=s=>a.getArtistSub(t.artist.followed?0:1))},[L("i",{class:["iconfont","icon-collect"+(t.artist.followed?"-active":"")]},null,2),M(" "+k(t.artist.followed?"已收藏":"收藏"),1)],2)]),L("div",H,[M(k(t.artist.briefDesc?t.artist.briefDesc:"暂无简介")+" ",1),t.introduction.length?(w(),A("span",{key:0,onClick:s[2]||(s[2]=(...t)=>a.moreDesc&&a.moreDesc(...t))},"更多>>")):_("",!0)])])])]),L("div",J,[L("div",K,[L("div",N,[Q,L("div",R,[L("span",{class:["hot"===t.type?"active":""],onClick:s[3]||(s[3]=t=>a.changeType("hot"))},"热门作品",2),L("span",{class:["album"===t.type?"active":""],onClick:s[4]||(s[4]=t=>a.changeType("album"))},"所有专辑",2),L("span",{class:["mv"===t.type?"active":""],onClick:s[5]||(s[5]=t=>a.changeType("mv"))},"相关MV",2)]),"hot"===t.type?(w(),A("div",W,[L("span",{onClick:s[6]||(s[6]=(...t)=>a.playAllSongs&&a.playAllSongs(...t)),class:"singer-btn playAll"},[X,Y]),L("span",{onClick:s[7]||(s[7]=(...t)=>a.addAll&&a.addAll(...t)),class:"singer-btn addAll"},[Z,tt]),L("span",{onClick:s[8]||(s[8]=(...t)=>a.collectAll&&a.collectAll(...t)),class:"singer-btn collectAll"},[st,it])])):_("",!0)]),L("div",at,[S(L(r,{songList:t.hotSongs,stripe:!0},null,8,["songList"]),[[D,"hot"===t.type]]),S(L("div",null,[L(c,{albumList:t.hotAlbums,loading:t.album_loading,num:t.album_count},null,8,["albumList","loading","num"])],512),[[D,"album"===t.type]]),S(L("div",et,[L(d,{mvList:t.hotMvs,loading:t.mv_loading,num:t.mv_count},null,8,["mvList","loading","num"]),t.isLoading?(w(),A(u,{key:0})):_("",!0)],512),[[D,"mv"===t.type],[p,a.loadMv]])]),"album"===t.type?(w(),A("div",lt,[L(m,{onCurrentChange:a.currentChange,layout:"prev, pager, next","page-size":t.limit,total:t.total},null,8,["onCurrentChange","page-size","total"])])):_("",!0)])]),L(g,{title:t.artist.name,modelValue:t.dialogDescVisible,"onUpdate:modelValue":s[9]||(s[9]=s=>t.dialogDescVisible=s),"destroy-on-close":!0},{default:T((()=>[L("div",ot,[L("dl",nt,[rt,L("dd",null,k(t.artist.briefDesc),1)]),(w(!0),A(C,null,$(t.introduction,((t,s)=>(w(),A("dl",{key:s,class:"introduction"},[L("dt",null,k(t.ti),1),L("dd",null,k(t.txt),1)])))),128))])])),_:1},8,["title","modelValue"])])):_("",!0)}));U.render=ct,U.__scopeId="data-v-9dcef508";export default U;
