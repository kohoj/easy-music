var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;import{_ as n}from"./index.80a54dc7.js";import{_ as r}from"./AlbumList.c674f628.js";import{p as c,a as u,e as d,o as p,f as m,g as y,F as g,h as v,i as h,w as f,j as k,b,c as L,r as C,d as S,x as w,a8 as I,t as _,k as V,s as j,m as q}from"./vendor.55e40976.js";import{_ as T}from"./PlayList.fa085941.js";import{_ as x}from"./MvList.e58cd9ee.js";const O={props:{artistList:Array,num:Number,loading:Boolean},setup(){}},P=f();c("data-v-6940fbde");const $={class:"item"},A={class:"faceImg"},M={class:"info"},N={class:"artist"},z={class:"faceImg"},B=y("div",{slot:"placeholder",class:"image-slot"},[y("i",{class:"iconfont icon-placeholder"})],-1),F={class:"info"},H={class:"name"},U={class:"albumSize"};u();const D=P(((e,s,t,a,l,i)=>{const o=d("el-skeleton-item"),n=d("el-image"),r=d("router-link"),c=d("el-skeleton");return p(),m(c,{loading:t.loading,animated:"",throttle:500,count:t.num},{template:P((()=>[y("div",$,[y("div",A,[y(o,{class:"ske-img",variant:"image"})]),y("div",M,[y(o,{variant:"h3",class:"ske-name",style:{width:"50%"}}),y(o,{variant:"h5",class:"ske-txt"})])])])),default:P((()=>[y("div",N,[(p(!0),m(g,null,v(t.artistList,(e=>(p(),m(r,{to:{path:"/singer",query:{id:e.id}},class:"item",key:e.id},{default:P((()=>[y("div",z,[y(n,{src:e.picUrl+"?param=120y120"},{default:P((()=>[B])),_:2},1032,["src"])]),y("div",F,[y("div",H,h(e.name),1),y("div",U,"专辑："+h(e.albumSize),1)])])),_:2},1032,["to"])))),128))])])),_:1},8,["loading","count"])}));O.render=D,O.__scopeId="data-v-6940fbde";const E={components:{},props:{videoList:Array,num:Number,loading:Boolean},data:()=>({}),computed:{},methods:{}},G=f();c("data-v-6e0a2ed8");const J={class:"item"},K={class:"ske-info"},Q={class:"video"},R=y("i",{class:"iconfont icon-play"},null,-1),W=y("div",{slot:"placeholder",class:"image-slot"},[y("i",{class:"iconfont icon-placeholder"})],-1),X={class:"playCount"},Y=y("i",{class:"iconfont icon-video"},null,-1),Z={class:"v-time"},ee={class:"info"};u();const se=G(((e,s,t,a,l,i)=>{const o=d("el-skeleton-item"),n=d("el-image"),r=d("router-link"),c=d("el-skeleton");return p(),m(c,{loading:t.loading,animated:"",count:t.num,throttle:500},{template:G((()=>[y("div",J,[y(o,{class:"ske-img",variant:"h3"}),y("div",K,[y(o,{variant:"h3",class:"ske-name"}),y(o,{variant:"h4",class:"ske-txt",style:{width:"50%"}}),y(o,{variant:"h5",class:"ske-txt"})])])])),default:G((()=>[y("div",Q,[(p(!0),m(g,null,v(t.videoList,((s,t)=>(p(),m("div",{class:"item",key:""+s.id+t},[y(r,{to:{path:s.type?"/video":"/mv",query:{id:s.vid}},class:"faceImg"},{default:G((()=>[R,y(n,{src:s.coverUrl},{default:G((()=>[W])),_:2},1032,["src"]),y("span",X,[Y,y("em",null,h(e.$utils.formartNum(s.playTime)),1)]),y("div",Z,h(e.$utils.formatSongTime(s.durationms)),1)])),_:2},1032,["to"]),y("div",ee,[y(r,{to:{path:"/video",query:{id:s.vid}},class:"v-name"},{default:G((()=>[k(h(s.title),1)])),_:2},1032,["to"]),(p(!0),m(g,null,v(s.creator,((e,s)=>(p(),m(r,{to:{path:"/user",query:{uid:e.userId}},class:"v-author",key:s},{default:G((()=>[k("By. "+h(0!==s?" / "+e.userName:e.userName),1)])),_:2},1032,["to"])))),128))])])))),128))])])),_:1},8,["loading","count"])}));E.render=se,E.__scopeId="data-v-6e0a2ed8";const te={name:"search",components:{SongList:n,AlbumList:r,ArtistList:O,PlayList:T,MvList:x,VideoList:E},setup(e){const n=b(),r=L(),{proxy:c}=q(),u=C({keyVal:n.query.key,suggestInfo:{},listType:{songs:"单曲",artists:"歌手",albums:"专辑",playlists:"歌单"},type:n.query.type||"1",history:[],list:[],total:0,offset:0,limit:30,currentpage:0,isShowSearch:!1,loading:!0}),d=S((()=>u.total+{1:"首单曲",10:"张专辑",100:"个歌手",1e3:"个歌单",1002:"个用户",1004:"个MV",1014:"个视频",1018:"个"}[u.type])),p=async()=>{const{data:e}=await c.$http.cloudsearch({keywords:u.keyVal,type:u.type,limit:u.limit,offset:u.offset});if(200!==e.code)return c.$msg.error("数据请求失败");"1"===u.type?(u.list=e.result.songs.map((e=>({id:String(e.id),name:e.name,mvId:e.mv,singer:e.ar,album:e.al,alia:e.alia,vip:1===e.fee,license:e.license,duration:c.$utils.formatSongTime(e.dt),url:`https://music.163.com/song/media/outer/url?id=${e.id}.mp3`,publishTime:c.$utils.formatMsgTime(e.publishTime)}))),u.total=e.result.songCount):"10"===u.type?(u.list=e.result.albums,u.total=e.result.albumCount):"100"===u.type?(u.list=e.result.artists,u.total=e.result.artistCount):"1000"===u.type?(u.list=e.result.playlists,u.total=e.result.playlistCount):"1004"===u.type?(u.list=e.result.mvs,u.total=e.result.mvCount):"1014"===u.type&&(u.list=e.result.videos,u.total=e.result.videoCount),u.loading=!1};return w((()=>{p()})),I((e=>{u.keyVal=e.query.key,u.type=e.query.type||"1",p()})),m=((e,s)=>{for(var t in s||(s={}))l.call(s,t)&&o(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&o(e,t,s[t]);return e})({},_(u)),s(m,t({searchInfo:d,currentChange:e=>{u.offset=(e-1)*u.limit,u.currentpage=e,p()},getListHandle:()=>{u.keyVal?(u.suggestInfo={},(async()=>{const{data:e}=await c.$http.serachSuggest({keywords:u.keyVal});if(200!==e.code)return c.$msg.error("数据请求失败");u.suggestInfo=e.result})(),u.isShowSearch=!0):u.isShowSearch=!1},jumpSearch:e=>{e&&(u.keyVal&&u.keyVal!==n.query.key?(r.push({path:"/search",query:{key:e,type:u.type}}),u.isShowSearch=!1):(u.loading=!0,u.list=[],p()))},jumpPage:(e,s)=>{switch(u.keyVal=e.name,s){case"songs":r.push({path:"/song",query:{id:e.id}});break;case"artists":r.push({path:"/singer",query:{id:e.id}});break;case"albums":r.push({path:"/album",query:{id:e.id}});break;case"playlists":trouter.push({path:"/playlist/detail",query:{id:e.id}})}u.isShowSearch=!1},selectType:e=>{u.type=e,u.offset=0,u.currentpage=0,r.push({path:"/search",query:{key:u.keyVal,type:u.type}})},searchInfo:d}));var m}},ae=f();c("data-v-722ea68a");const le={class:"search"},ie={class:"search-hd"},oe={class:"w1200"},ne={class:"search-box"},re={class:"search-key-list"},ce={class:"item-main"},ue=k(" -"),de=k(" -"),pe={key:0,class:"search-history"},me=y("span",null,"历史搜索：",-1),ye={class:"w1200"},ge={class:"search-main"},ve={class:"search-tab"},he=k("搜索结果"),fe={class:"type"},ke={class:"search-list"},be={class:"pagination"};u();const Le=ae(((e,s,t,a,l,i)=>{const o=d("el-input"),n=d("el-popover"),r=d("song-list"),c=d("album-list"),u=d("artist-list"),f=d("play-list"),b=d("mv-list"),L=d("video-list"),C=d("el-pagination");return p(),m("div",le,[y("div",ie,[y("div",oe,[y("div",ne,[y(n,{placement:"bottom-start",width:626,visible:e.isShowSearch,trigger:"manual"},{reference:ae((()=>[y(o,{class:"search-inp",placeholder:"请输入歌名、歌词、歌手或专辑",modelValue:e.keyVal,"onUpdate:modelValue":s[1]||(s[1]=s=>e.keyVal=s),onFocus:a.getListHandle,onInput:a.getListHandle,clearable:""},null,8,["modelValue","onFocus","onInput"])])),default:ae((()=>[y("div",re,[(p(!0),m(g,null,v(e.suggestInfo.order,((s,t)=>(p(),m("div",{class:"search-item",key:t},[y("h6",null,h(e.listType[s]),1),y("div",ce,[(p(!0),m(g,null,v(e.suggestInfo[s],((e,t)=>(p(),m("div",{class:"list",key:t,onClick:t=>a.jumpPage(e,s)},[k(h(e.name)+" ",1),"songs"===s?(p(),m(g,{key:0},[ue,(p(!0),m(g,null,v(e.artists,((e,s)=>(p(),m("span",{key:s},h(e.name+(0!==s?" / ":"")),1)))),128))],64)):"albums"===s?(p(),m(g,{key:1},[de,y("span",null,h(e.artist.name),1)],64)):V("",!0)],8,["onClick"])))),128))])])))),128))])])),_:1},8,["visible"]),y("i",{class:"iconfont icon-search",slot:"suffix",onClick:s[2]||(s[2]=j((s=>a.jumpSearch(e.keyVal)),["stop"]))}),e.history.length?(p(),m("div",pe,[me])):V("",!0)])])]),y("div",ye,[y("div",ge,[y("div",ve,[y("h2",null,[he,y("em",null,"("+h(a.searchInfo)+")",1)]),y("div",fe,[y("span",{class:"1"===e.type?"active":"",onClick:s[3]||(s[3]=e=>a.selectType("1"))},"单曲",2),y("span",{class:"10"===e.type?"active":"",onClick:s[4]||(s[4]=e=>a.selectType("10"))},"专辑",2),y("span",{class:"100"===e.type?"active":"",onClick:s[5]||(s[5]=e=>a.selectType("100"))},"歌手",2),y("span",{class:"1000"===e.type?"active":"",onClick:s[6]||(s[6]=e=>a.selectType("1000"))},"歌单",2),y("span",{class:"1004"===e.type?"active":"",onClick:s[7]||(s[7]=e=>a.selectType("1004"))},"MV",2),y("span",{class:"1014"===e.type?"active":"",onClick:s[8]||(s[8]=e=>a.selectType("1014"))},"视频",2)])]),y("div",ke,["1"===e.type?(p(),m(r,{key:0,songList:e.list,stripe:!0,offset:e.offset},null,8,["songList","offset"])):V("",!0),"10"===e.type?(p(),m(c,{key:1,albumList:e.list,loading:e.loading,num:30},null,8,["albumList","loading"])):V("",!0),"100"===e.type?(p(),m(u,{key:2,artistList:e.list,loading:e.loading,num:30},null,8,["artistList","loading"])):V("",!0),"1000"===e.type?(p(),m(f,{key:3,playList:e.list,loading:e.loading,num:30},null,8,["playList","loading"])):V("",!0),"1004"===e.type?(p(),m(b,{key:4,mvList:e.list,loading:e.loading,num:30},null,8,["mvList","loading"])):V("",!0),"1014"===e.type?(p(),m(L,{key:5,videoList:e.list,loading:e.loading,num:30},null,8,["videoList","loading"])):V("",!0)]),y("div",be,[y(C,{onCurrentChange:a.currentChange,"current-page":e.currentpage,"page-size":e.limit,layout:"prev, pager, next",total:e.total},null,8,["onCurrentChange","current-page","page-size","total"])])])])])}));te.render=Le,te.__scopeId="data-v-722ea68a";export default te;
