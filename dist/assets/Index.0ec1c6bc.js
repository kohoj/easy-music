var N=Object.defineProperty,A=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var S=(e,o,i)=>o in e?N(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,C=(e,o)=>{for(var i in o||(o={}))R.call(o,i)&&S(e,i,o[i]);if(L)for(var i of L(o))M.call(o,i)&&S(e,i,o[i]);return e},$=(e,o)=>A(e,b(o));import{f as P}from"./song.122b202a.js";import{_ as V}from"./index.e9f38bbb.js";import{_ as B}from"./Loading.ed48931e.js";import{b as E,c as U,u as j,r as Y,x as z,ab as G,t as H,p as J,a as K,e as f,o as d,f as p,g as t,F as w,h as F,i as r,j as u,k as O,m as Q,w as W}from"./vendor.a7e3494f.js";const q={name:"Rank",components:{SongList:V,Loading:B},setup(e){const o=E(),i=U(),{proxy:l}=Q(),h=j(),s=Y({list:[],type:"Top",listTop:[],listFeature:[],listOther:[],rId:0,rankInfo:{},songList:[],isLoading:!0,total:0}),m=async()=>{const{data:n}=await l.$http.topListDetail();if(n.code!==200)return l.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.listTop=n.list.filter(c=>c.ToplistType),s.listFeature=n.list.filter(c=>!c.ToplistType&&c.name.indexOf("\u4E91\u97F3\u4E50")>=0),s.listOther=n.list.filter(c=>!c.ToplistType&&c.name.indexOf("\u4E91\u97F3\u4E50")<0),s.list=s.type?s["list"+s.type]:s.listTop,s.rId=s.rId?s.rId:s.listTop[0].id},k=async()=>{s.isLoading=!0;const{data:n}=await l.$http.listDetail({id:s.rId,s:-1});if(n.code!==200)return l.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.rankInfo=n.playlist,s.songList=_(n.playlist.tracks,n.privileges),s.total=s.songList.length,s.isLoading=!1},g=n=>{s.type=n,s.list=s["list"+s.type],s.rId=s["list"+n][0].id,i.push({path:"rank",query:{type:s.type,rId:s.rId}})},I=n=>{s.rId=n.id,i.push({path:"rank",query:{type:s.type,rId:s.rId}})},a=()=>{h.dispatch("playAll",{list:s.songList}),h.commit("SET_PLAYLISTTIPS",!0)},_=(n,c)=>{const T=[];return n.map((v,D)=>{v.id&&(v.license=!c[D].cp,T.push(P(v)))}),T};return z(()=>{s.type=o.query.type||s.type,s.rId=o.query.rId,m()}),G(()=>{s.rId&&k()}),$(C({},H(s)),{selectItem:I,selectType:g,playAllSongs:a})}},y=W();J("data-v-7d71e0e8");const X={class:"rank"},Z={class:"w1200"},x={class:"rank-container"},ss={class:"rank-aside"},ts={class:"rank-type"},es={class:"type-hd"},os={class:"type-main"},ns=t("div",{slot:"placeholder",class:"image-slot"},[t("i",{class:"iconfont icon-placeholder"})],-1),as={class:"item-info"},is={class:"item-title"},ls={class:"item-time"},rs={class:"rank-main"},cs={class:"rank-list-hd"},ds=t("div",{slot:"placeholder",class:"image-slot"},[t("i",{class:"iconfont icon-placeholder"})],-1),ps={key:0,class:"rank-info"},us={class:"rank-title"},_s={key:0,class:"rank-tags"},ms={class:"rank-digital"},fs={class:"rank-playCount"},ys=t("i",{class:"iconfont icon-playnum"},null,-1),hs={class:"rank-collect"},ks=t("i",{class:"iconfont icon-collect"},null,-1),gs={class:"rank-comment"},Is=t("i",{class:"iconfont icon-comment"},null,-1),vs={class:"rank-desc"},Ts={class:"song-header"},Ls=u("\u6B4C\u66F2\u5217\u8868 "),Ss=t("i",{class:"iconfont icon-audio-play"},null,-1),Cs=u(" \u64AD\u653E\u5168\u90E8");K();const $s=y((e,o,i,l,h,s)=>{const m=f("el-image"),k=f("router-link"),g=f("Loading"),I=f("song-list");return d(),p("div",X,[t("div",Z,[t("div",x,[t("div",ss,[t("div",ts,[t("div",es,[t("span",{class:e.type==="Top"?"active":"",onClick:o[1]||(o[1]=a=>l.selectType("Top"))},"TOP\u699C",2),t("span",{class:e.type==="Feature"?"active":"",onClick:o[2]||(o[2]=a=>l.selectType("Feature"))},"\u7279\u8272\u699C",2),t("span",{class:e.type==="Other"?"active":"",onClick:o[3]||(o[3]=a=>l.selectType("Other"))},"\u573A\u666F\u699C",2)]),t("div",os,[(d(!0),p(w,null,F(e.list,(a,_)=>(d(),p("div",{class:["type-item",e.rId==a.id?"active":""],key:_,onClick:n=>l.selectItem(a)},[t(m,{class:"item-img",src:a.coverImgUrl},{default:y(()=>[ns]),_:2},1032,["src"]),t("div",as,[t("div",is,r(a.name),1),t("div",ls,r(a.updateFrequency),1)])],10,["onClick"]))),128))])])]),t("div",rs,[t("div",cs,[t(m,{class:"rank-img",src:e.rankInfo.coverImgUrl},{default:y(()=>[ds]),_:1},8,["src"]),e.rankInfo?(d(),p("div",ps,[t("div",us,[u(r(e.rankInfo.name)+" ",1),t("span",null,"("+r(e.$utils.formartDate(e.rankInfo.updateTime,"MM\u6708dd\u65E5"))+" \u66F4\u65B0)",1)]),e.rankInfo.tags?(d(),p("div",_s,[(d(!0),p(w,null,F(e.rankInfo.tags,(a,_)=>(d(),p(k,{to:{path:"/playlist",query:{cat:a}},class:"tag",key:_},{default:y(()=>[u("#"+r(a),1)]),_:2},1032,["to"]))),128))])):O("",!0),t("div",ms,[t("span",fs,[ys,u(" "+r(e.$utils.formartNum(e.rankInfo.playCount))+"\u6B21",1)]),t("span",hs,[ks,u(" "+r(e.$utils.formartNum(e.rankInfo.subscribedCount)),1)]),t("span",gs,[Is,u(" "+r(e.$utils.formartNum(e.rankInfo.commentCount)),1)])]),t("div",vs,r(e.rankInfo.description),1)])):O("",!0)]),t("div",Ts,[t("h4",null,[Ls,t("em",null,r(e.total+"\u9996\u6B4C"),1)]),t("span",{class:"play-all",onClick:o[4]||(o[4]=(...a)=>l.playAllSongs&&l.playAllSongs(...a))},[Ss,Cs])]),e.isLoading?(d(),p(g,{key:0})):(d(),p(I,{key:1,songList:e.songList,stripe:!0},null,8,["songList"]))])])])])});q.render=$s;q.__scopeId="data-v-7d71e0e8";export{q as default};
