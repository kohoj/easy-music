var V=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var I=(t,s,r)=>s in t?V(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,x=(t,s)=>{for(var r in s||(s={}))F.call(s,r)&&I(t,r,s[r]);if(C)for(var r of C(s))W.call(s,r)&&I(t,r,s[r]);return t},q=(t,s)=>j(t,B(s));import{_ as z}from"./PlayList.8a5604c7.js";import{p as S,a as D,o as n,f as c,w as P,g as o,b as A,c as E,r as G,d as H,x as J,y as O,t as K,e as k,a7 as Q,F as b,h as $,i as m,j as M,k as N,q as U,m as X}from"./vendor.a7e3494f.js";const w={},Y=P();S("data-v-5443d147");const Z={class:"loading"},ee=o("div",{class:"loader"},null,-1);D();const te=Y((t,s,r,l,_,e)=>(n(),c("div",Z,[ee])));w.render=te;w.__scopeId="data-v-5443d147";const R={name:"PlayListWrap",components:{PlayList:z,Loading:w},setup(t){const{proxy:s}=X(),r=A(),l=E(),_=r.query.cat,e=G({sub:[],categories:[],curType:"",moreTxt:{},allList:{},playlist_list:[],playlist_count:20,playlist_loading:!0,busy:!0,params:{order:"hot",cat:_,limit:50,offset:0}}),f=async()=>{const{data:a}=await s.$http.catlist();if(e.sub=a.sub,a.code!==200)return s.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");for(const i in a.categories){const y={name:a.categories[i]};y.children=e.sub.filter(T=>T.category===Number(i)),e.categories.push(y)}e.curType=_||a.all.name,e.allList=a.all,d()};H(()=>()=>["item-box","filter-more",moreTxt[index]?"active":""]);const h=a=>{l.push({path:"playlist",query:{cat:a.name,order:e.params.order}})},v=()=>{l.push({path:"playlist"})},g=a=>{l.push({path:"playlist",query:{cat:e.params.cat,order:a}})},d=()=>{const a=e.sub.find(i=>i.name===e.curType);e.moreTxt={},a&&e.categories[a.category].children.indexOf(a)>=8&&(e.moreTxt[a.category]=a)},u=async a=>{const{data:i}=await s.$http.playList(a);if(i.code!==200)return s.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");e.playlist_list=e.params.offset!==0?[...e.playlist_list,...i.playlists]:i.playlists,e.busy=e.playlist_list.length>=i.total,e.playlist_loading=!1},p=()=>{e.busy=!0,e.params.offset=e.playlist_list.length};return J(()=>{f(),u(e.params)}),O(()=>r.query,(a,i)=>{const{cat:y,order:T}=a;e.curType=y||e.allList.name,e.params=Object.assign({},{order:"hot",cat:"",limit:50,offset:0},{cat:y||"",order:T||"hot"}),d()}),O(()=>e.params,(a,i)=>{a.cat!==i.cat&&(e.busy=!0,e.playlist_list=[]),u(a)},{deep:!0}),q(x({},K(e)),{getCatlist:f,selectType:h,closed:v,loadMore:p,selectOrder:g})}},L=P();S("data-v-b7b32036");const se={class:"playlist"},ae={class:"w1200"},oe={class:"filter"},re={class:"filter-title"},ie={class:"filter-box"},le=o("i",{class:"iconfont icon-arrow"},null,-1),ne={key:1},ce={class:"filter-drop"},de={class:"list-container"},pe={class:"list-head"},ue=o("i",{class:"iconfont icon-closed"},null,-1),_e={class:"type"},ye={class:"wrapper infinite-list","infinite-scroll-disabled":"busy","infinite-scroll-distance":"100"};D();const me=L((t,s,r,l,_,e)=>{const f=k("el-popover"),h=k("play-list"),v=k("Loading"),g=Q("infinite-scroll");return n(),c("div",se,[o("div",ae,[o("div",oe,[(n(!0),c(b,null,$(t.categories,(d,u)=>(n(),c("div",{class:"filter-item",key:u},[o("div",re,m(d.name),1),o("div",ie,[(n(!0),c(b,null,$(d.children.slice(0,8),p=>(n(),c("span",{class:["item-box",t.curType===p.name?"active":""],key:p.name},[o("em",{onClick:a=>l.selectType(p)},m(p.name),9,["onClick"])],2))),128)),o(f,{width:"auto",trigger:"click"},{reference:L(()=>[d.children.length>9?(n(),c("span",{key:0,class:["item-box","filter-more",t.moreTxt[u]?"active":""]},[o("em",null,[M(m(t.moreTxt[u]?t.curType:"\u66F4\u591A"),1),le])],2)):(n(),c("span",ne))]),default:L(()=>[o("div",ce,[(n(!0),c(b,null,$(d.children.slice(9),p=>(n(),c("span",{class:["item-box",t.curType===p.name?"active":""],key:p.name},[o("em",{onClick:a=>l.selectType(p,u)},m(p.name),9,["onClick"])],2))),128))])]),_:2},1024)])]))),128))]),o("div",de,[o("div",pe,[o("h2",null,[M(m(t.curType)+" ",1),t.curType!==t.allList.name?(n(),c("em",{key:0,class:"filter-close",onClick:s[1]||(s[1]=(...d)=>l.closed&&l.closed(...d))},[ue])):N("",!0)]),o("div",_e,[o("span",{class:t.params.order==="hot"?"active":"",onClick:s[2]||(s[2]=d=>l.selectOrder("hot"))},"\u70ED\u95E8",2),o("span",{class:t.params.order==="new"?"active":"",onClick:s[3]||(s[3]=d=>l.selectOrder("new"))},"\u6700\u65B0",2)])]),U(o("div",ye,[o(h,{playList:t.playlist_list,loading:t.playlist_loading,num:t.playlist_count},null,8,["playList","loading","num"]),t.busy?(n(),c(v,{key:0})):N("",!0)],512),[[g,l.loadMore]])])])])});R.render=me;R.__scopeId="data-v-b7b32036";export{R as default};
