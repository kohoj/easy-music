var s=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,a,e)=>a in t?s(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;import{f as r}from"./song.a4f4fd39.js";import{_ as o}from"./index.80a54dc7.js";import{_ as c}from"./Loading.076676db.js";import{b as p,c as d,u as y,r as m,x as u,ab as f,t as k,p as g,a as v,e as I,o as h,f as T,g as b,F as L,h as O,i as j,j as C,k as w,m as P,w as S}from"./vendor.55e40976.js";const $={name:"Rank",components:{SongList:o,Loading:c},setup(s){const o=p(),c=d(),{proxy:g}=P(),v=y(),I=m({list:[],type:"Top",listTop:[],listFeature:[],listOther:[],rId:0,rankInfo:{},songList:[],isLoading:!0,total:0}),h=(s,t)=>{const a=[];return s.map(((s,e)=>{s.id&&(s.license=!t[e].cp,a.push(r(s)))})),a};return u((()=>{I.type=o.query.type||I.type,I.rId=o.query.rId,(async()=>{const{data:s}=await g.$http.topListDetail();if(200!==s.code)return g.$msg.error("数据请求失败");I.listTop=s.list.filter((s=>s.ToplistType)),I.listFeature=s.list.filter((s=>!s.ToplistType&&s.name.indexOf("云音乐")>=0)),I.listOther=s.list.filter((s=>!s.ToplistType&&s.name.indexOf("云音乐")<0)),I.list=I.type?I["list"+I.type]:I.listTop,I.rId=I.rId?I.rId:I.listTop[0].id})()})),f((()=>{I.rId&&(async()=>{I.isLoading=!0;const{data:s}=await g.$http.listDetail({id:I.rId,s:-1});if(200!==s.code)return g.$msg.error("数据请求失败");I.rankInfo=s.playlist,I.songList=h(s.playlist.tracks,s.privileges),I.total=I.songList.length,I.isLoading=!1})()})),T=((s,t)=>{for(var a in t||(t={}))l.call(t,a)&&n(s,a,t[a]);if(e)for(var a of e(t))i.call(t,a)&&n(s,a,t[a]);return s})({},k(I)),t(T,a({selectItem:s=>{I.rId=s.id,c.push({path:"rank",query:{type:I.type,rId:I.rId}})},selectType:s=>{I.type=s,I.list=I["list"+I.type],I.rId=I["list"+s][0].id,c.push({path:"rank",query:{type:I.type,rId:I.rId}})},playAllSongs:()=>{v.dispatch("playAll",{list:I.songList}),v.commit("SET_PLAYLISTTIPS",!0)}}));var T}},_=S();g("data-v-1eb8e476");const q={class:"rank"},x={class:"w1200"},F={class:"rank-container"},A={class:"rank-aside"},D={class:"rank-type"},N={class:"type-hd"},E={class:"type-main"},M=b("div",{slot:"placeholder",class:"image-slot"},[b("i",{class:"iconfont icon-placeholder"})],-1),U={class:"item-info"},R={class:"item-title"},Y={class:"item-time"},z={class:"rank-main"},B={class:"rank-list-hd"},G=b("div",{slot:"placeholder",class:"image-slot"},[b("i",{class:"iconfont icon-placeholder"})],-1),H={key:0,class:"rank-info"},J={class:"rank-title"},K={key:0,class:"rank-tags"},Q={class:"rank-digital"},V={class:"rank-playCount"},W=b("i",{class:"iconfont icon-playnum"},null,-1),X={class:"rank-collect"},Z=b("i",{class:"iconfont icon-collect"},null,-1),ss={class:"rank-comment"},ts=b("i",{class:"iconfont icon-comment"},null,-1),as={class:"rank-desc"},es={class:"song-header"},ls=C("歌曲列表 "),is=b("i",{class:"iconfont icon-audio-play"},null,-1),ns=C(" 播放全部");v();const rs=_(((s,t,a,e,l,i)=>{const n=I("el-image"),r=I("router-link"),o=I("Loading"),c=I("song-list");return h(),T("div",q,[b("div",x,[b("div",F,[b("div",A,[b("div",D,[b("div",N,[b("span",{class:"Top"===s.type?"active":"",onClick:t[1]||(t[1]=s=>e.selectType("Top"))},"TOP榜",2),b("span",{class:"Feature"===s.type?"active":"",onClick:t[2]||(t[2]=s=>e.selectType("Feature"))},"特色榜",2),b("span",{class:"Other"===s.type?"active":"",onClick:t[3]||(t[3]=s=>e.selectType("Other"))},"场景榜",2)]),b("div",E,[(h(!0),T(L,null,O(s.list,((t,a)=>(h(),T("div",{class:["type-item",s.rId==t.id?"active":""],key:a,onClick:s=>e.selectItem(t)},[b(n,{class:"item-img",src:t.coverImgUrl},{default:_((()=>[M])),_:2},1032,["src"]),b("div",U,[b("div",R,j(t.name),1),b("div",Y,j(t.updateFrequency),1)])],10,["onClick"])))),128))])])]),b("div",z,[b("div",B,[b(n,{class:"rank-img",src:s.rankInfo.coverImgUrl},{default:_((()=>[G])),_:1},8,["src"]),s.rankInfo?(h(),T("div",H,[b("div",J,[C(j(s.rankInfo.name)+" ",1),b("span",null,"("+j(s.$utils.formartDate(s.rankInfo.updateTime,"MM月dd日"))+" 更新)",1)]),s.rankInfo.tags?(h(),T("div",K,[(h(!0),T(L,null,O(s.rankInfo.tags,((s,t)=>(h(),T(r,{to:{path:"/playlist",query:{cat:s}},class:"tag",key:t},{default:_((()=>[C("#"+j(s),1)])),_:2},1032,["to"])))),128))])):w("",!0),b("div",Q,[b("span",V,[W,C(" "+j(s.$utils.formartNum(s.rankInfo.playCount))+"次",1)]),b("span",X,[Z,C(" "+j(s.$utils.formartNum(s.rankInfo.subscribedCount)),1)]),b("span",ss,[ts,C(" "+j(s.$utils.formartNum(s.rankInfo.commentCount)),1)])]),b("div",as,j(s.rankInfo.description),1)])):w("",!0)]),b("div",es,[b("h4",null,[ls,b("em",null,j(s.total+"首歌"),1)]),b("span",{class:"play-all",onClick:t[4]||(t[4]=(...s)=>e.playAllSongs&&e.playAllSongs(...s))},[is,ns])]),s.isLoading?(h(),T(o,{key:0})):(h(),T(c,{key:1,songList:s.songList,stripe:!0},null,8,["songList"]))])])])])}));$.render=rs,$.__scopeId="data-v-1eb8e476";export default $;
