var j=Object.defineProperty,F=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var M=(t,o,r)=>o in t?j(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,N=(t,o)=>{for(var r in o||(o={}))z.call(o,r)&&M(t,r,o[r]);if(q)for(var r of q(o))E.call(o,r)&&M(t,r,o[r]);return t},U=(t,o)=>F(t,H(o));import{b as O,u as Y,r as G,d as J,y as K,a8 as Q,x as W,t as X,p as Z,a as x,e as b,o as n,f as c,g as s,i as d,k as y,F as L,h as S,j as h,w as ss,m as ts}from"./vendor.a7e3494f.js";import{f as os}from"./song.122b202a.js";import{_ as es}from"./Loading.ed48931e.js";import{_ as is}from"./index.e9f38bbb.js";const P={setup(t){const{proxy:o}=ts(),r=O(),m=Y(),i=G({id:"",details:{},songList:[],collects:[],playlists:[],comments:[],total:0,isLoading:!0,isShowDesc:!1}),k=J(()=>m.getters.isLogin),v=async a=>{i.isLoading=!0;const{data:l}=await o.$http.playlistdetail(a);if(l.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");if(i.details=l.playlist,k.value){const f=l.playlist.trackIds;p(f)}else i.songList=C(l.playlist.tracks),i.total=i.songList.length,i.isLoading=!1},p=async a=>{const l=[];let g=[];for(let _=0;_<a.length;_+=500)l.push(a.slice(_,_+500));for(let _=0;_<l.length;_++){const A=[];l[_].map(V=>{A.push(V.id)}),i.isLoading=!0;const{data:T}=await o.$http.songDetail({ids:A.join(","),timestamp:new Date().valueOf()+_});g=g.concat(C(T.songs,T.privileges))}i.songList=g,i.total=g.length,i.isLoading=!1},I=async a=>{const{data:l}=await o.$http.playlistSCollect(a);if(l.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");i.collects=l.subscribers},w=async a=>{const{data:l}=await o.$http.playlistRelated(a);if(l.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");i.playlists=l.playlists},e=async a=>{const{data:l}=await o.$http.playlistComment(a);if(l.code!==200)return o.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");i.comments=l.comments},$=()=>{m.dispatch("loginSuc",!0)},R=()=>{m.dispatch("playAll",{list:i.songList}),m.commit("SET_PLAYLISTTIPS",!0)},B=async a=>{const{data:l}=await t.$http.subPlayList({id:a.id,t:a.subscribed?2:1});if(l.code!==200)return t.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");i.details.subscribed=!i.details.subscribed},C=(a,l)=>{const f=[];return a.map((g,_)=>{g.id&&(l&&(g.license=!l[_].cp),f.push(os(g)))}),f},D=a=>{v({id:a,s:8}),I({id:a,limit:18}),w({id:a}),e({id:a,limit:9})};return K(()=>k.value,(a,l)=>{if(a){const f=i.details.trackIds;p(f)}else i.songList=C(i.details.tracks),i.total=i.details.tracks.length}),Q(a=>{i.songList=[],i.total=0,i.id=a.query.id,D(i.id)}),W(()=>{i.id=r.query.id,D(i.id)}),U(N({},X(i)),{isLogin:k,loginDialog:$,playAllSongs:R,subPlayList:B})},components:{Loading:es,SongList:is}},u=ss();Z("data-v-5b45ad19");const as={class:"detail"},ls={class:"w1200"},ns={class:"detail-container"},cs={class:"detail-main"},ds={class:"cover"},rs={class:"cover-img"},us=s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1),ms={class:"cover-info"},_s={class:"cover-title"},hs={key:0,class:"cover-author"},ps=s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1),gs={class:"cover-name"},vs={class:"cover-date"},fs={key:1,class:"cover-tags"},ys={class:"cover-digital"},Ls={class:"cover-playCount"},ks=s("i",{class:"iconfont icon-playnum"},null,-1),bs={class:"cover-collect"},Ss=s("i",{class:"iconfont icon-collect"},null,-1),Is={class:"cover-comment"},ws=s("i",{class:"iconfont icon-comment"},null,-1),$s={class:"cover-desc"},Cs=h("\u6B4C\u5355\u7B80\u4ECB"),Ds=s("i",{class:"iconfont icon-closed"},null,-1),As={key:0,class:"cover-desc-all"},Ts={class:"song-main"},qs={class:"song-header"},Ms=h("\u6B4C\u66F2\u5217\u8868 "),Ns=s("i",{class:"iconfont icon-audio-play"},null,-1),Us=h(" \u64AD\u653E\u5168\u90E8"),Ps={key:0,class:"showAllSongsTips"},Rs={class:"detail-aside"},Bs={class:"playlist-collect"},Vs=s("h3",{class:"aside-title"},"\u559C\u6B22\u8FD9\u4E2A\u6B4C\u5355\u7684\u4EBA",-1),js={class:"aside-main collect-main"},Fs=s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1),Hs={class:"playlist-recom"},zs=s("h3",{class:"aside-title"},"\u76F8\u5173\u6B4C\u5355\u63A8\u8350",-1),Es={class:"aside-main recom-main"},Os=s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1),Ys={class:"recom-info"},Gs={class:"recom-name"},Js={class:"recom-author"},Ks=h(" By. "),Qs={class:"playlist-comment"},Ws=s("h3",{class:"aside-title"},"\u6B4C\u5355\u8BC4\u8BBA",-1),Xs={class:"aside-main comment-main"},Zs=s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1),xs={class:"comment-info"},st={class:"comment-userInfo"},tt={class:"comment-date"},ot={class:"comment-desc"};x();const et=u((t,o,r,m,i,k)=>{const v=b("el-image"),p=b("router-link"),I=b("Loading"),w=b("song-list");return n(),c("div",as,[s("div",ls,[s("div",ns,[s("div",cs,[s("div",ds,[s("div",rs,[s(v,{src:t.details.coverImgUrl},{default:u(()=>[us]),_:1},8,["src"])]),s("div",ms,[s("div",_s,d(t.details.name),1),t.details.creator?(n(),c("div",hs,[s(v,{src:t.details.creator.avatarUrl,class:"cover-avatar"},{default:u(()=>[ps]),_:1},8,["src"]),s("div",gs,d(t.details.creator.nickname),1),s("div",vs,d(t.$utils.formartDate(t.details.createTime,"yyyy-MM-dd")),1)])):y("",!0),t.details.tags?(n(),c("div",fs,[(n(!0),c(L,null,S(t.details.tags,(e,$)=>(n(),c(p,{to:{path:"/playlist",query:{cat:e}},class:"tag",key:$},{default:u(()=>[h("#"+d(e),1)]),_:2},1032,["to"]))),128))])):y("",!0),s("div",ys,[s("span",Ls,[ks,h(" "+d(t.$utils.formartNum(t.details.playCount))+"\u6B21",1)]),s("span",bs,[Ss,h(" "+d(t.$utils.formartNum(t.details.subscribedCount)),1)]),s("span",Is,[ws,h(" "+d(t.$utils.formartNum(t.details.commentCount)),1)])]),s("div",$s,[s("h5",null,[Cs,t.isShowDesc?(n(),c("em",{key:0,class:"desc-close",onClick:o[1]||(o[1]=e=>t.isShowDesc=!1)},[Ds])):y("",!0)]),s("p",{innerHTML:t.details.description,onClick:o[2]||(o[2]=(...e)=>t.showAllDesc&&t.showAllDesc(...e))},null,8,["innerHTML"]),t.isShowDesc?(n(),c("pre",As,"                                    "+d(t.details.description)+`\r
                                `,1)):y("",!0)])])]),s("div",Ts,[s("div",qs,[s("h4",null,[Ms,s("em",null,d(t.total+"\u9996\u6B4C"),1)]),s("span",{class:"play-all",onClick:o[3]||(o[3]=(...e)=>m.playAllSongs&&m.playAllSongs(...e))},[Ns,Us]),s("span",{class:["collect",t.details.subscribed?"active":""],onClick:o[4]||(o[4]=e=>m.subPlayList(t.details))},[s("i",{class:["iconfont","icon-collect"+(t.details.subscribed?"-active":"")]},null,2),h(" "+d(t.details.subscribed?"\u5DF2\u6536\u85CF":"\u6536\u85CF"),1)],2)]),t.isLoading?(n(),c(I,{key:0})):(n(),c(L,{key:1},[s(w,{songList:t.songList,stripe:!0},null,8,["songList"]),m.isLogin?y("",!0):(n(),c("div",Ps,[s("span",{onClick:o[5]||(o[5]=(...e)=>m.loginDialog&&m.loginDialog(...e))},"\u767B\u5F55\u540E\u67E5\u770B\u5168\u90E8\u6B4C\u66F2")]))],64))])]),s("div",Rs,[s("div",Bs,[Vs,s("div",js,[(n(!0),c(L,null,S(t.collects,e=>(n(),c(p,{class:"collect-author",to:{path:"/singer",query:{id:e.userId}},key:e.userId},{default:u(()=>[s(v,{src:e.avatarUrl},{default:u(()=>[Fs]),_:2},1032,["src"])]),_:2},1032,["to"]))),128))])]),s("div",Hs,[zs,s("div",Es,[(n(!0),c(L,null,S(t.playlists,e=>(n(),c(p,{class:"recom-item",to:{path:"/playlist/detail",query:{id:e.id}},key:e.id},{default:u(()=>[s(v,{src:e.coverImgUrl},{default:u(()=>[Os]),_:2},1032,["src"]),s("div",Ys,[s("div",Gs,d(e.name),1),s("div",Js,[Ks,s(p,{to:{path:"/user",query:{id:e.creator.userId}}},{default:u(()=>[h(d(e.creator.nickname),1)]),_:2},1032,["to"])])])]),_:2},1032,["to"]))),128))])]),s("div",Qs,[Ws,s("div",Xs,[(n(!0),c(L,null,S(t.comments,e=>(n(),c("div",{class:"comment-item",key:e.commentId},[s(p,{to:{path:"/user",query:{id:e.commentId}}},{default:u(()=>[s(v,{src:e.user.avatarUrl},{default:u(()=>[Zs]),_:2},1032,["src"])]),_:2},1032,["to"]),s("div",xs,[s("div",st,[s(p,{to:{path:"/user",query:{id:e.commentId}},class:"comment-name"},{default:u(()=>[h(d(e.user.nickname),1)]),_:2},1032,["to"]),s("span",tt,d(t.$utils.formatMsgTime(e.time)),1)]),s("div",ot,d(e.content),1)])]))),128))])])])])])])});P.render=et;P.__scopeId="data-v-5b45ad19";export{P as default};
