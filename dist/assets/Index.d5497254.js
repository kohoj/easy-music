var s=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,i)=>l in a?s(a,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[l]=i;import{u as c,b as n,r as d,x as m,a8 as r,t as u,p as b,a as p,e as y,o as f,f as h,g as v,j as g,i as S,F as w,h as A,k as D,m as I,w as k}from"./vendor.55e40976.js";import{f as j}from"./song.a4f4fd39.js";import{_}from"./index.80a54dc7.js";import{_ as L}from"./Comments.3d0268e1.js";const $={name:"albumDetail",components:{SongList:_,CommentList:L},setup(s){const{proxy:b}=I(),p=c(),y=n(),f=d({albumId:"",details:null,songList:[],dynamic:{},hotAlbums:[],comments:[],type:3,isShowDesc:!1}),h=async()=>{const{data:s}=await b.$http.artistAlbum({id:f.details.artists[0].id,limit:5});if(200!==s.code)return b.$msg.error("数据请求失败");f.hotAlbums=s.hotAlbums},v=s=>{const a=[];return s.map(((l,i)=>{l.id&&(l.license=!s[i].privilege.cp,a.push(j(l)))})),a},g=()=>{(async s=>{const{data:a}=await b.$http.album(s);if(200!==a.code)return b.$msg.error("数据请求失败");f.details=a.album,f.songList=v(a.songs),h()})({id:f.albumId}),(async s=>{const{data:a}=await b.$http.albumDynamic(s);if(200!==a.code)return b.$msg.error("数据请求失败");f.dynamic=a})({id:f.albumId})};return m((()=>{f.albumId=y.query.id,g()})),r((s=>{f.albumId=s.query.id,g()})),S=((s,a)=>{for(var l in a||(a={}))e.call(a,l)&&o(s,l,a[l]);if(i)for(var l of i(a))t.call(a,l)&&o(s,l,a[l]);return s})({},u(f)),a(S,l({showAllDesc:()=>{f.details.description.length>120&&(f.isShowDesc=!f.isShowDesc)},playAllSongs:()=>{p.dispatch("playAll",{list:f.songList}),p.commit("SET_PLAYLISTTIPS",!0)},subAlbum:async()=>{const{data:s}=await b.$http.albumSub({id:f.albumId,t:Number(!f.dynamic.isSub)});if(200!==s.code)return b.$msg.error("数据请求失败");f.dynamic.isSub=Number(!f.dynamic.isSub)}}));var S}},O=k();b("data-v-40b0f158");const P={key:0,class:"album"},C={class:"w1200"},q={class:"album-cover"},T={class:"album-img"},x=v("div",{slot:"placeholder",class:"image-slot"},[v("i",{class:"iconfont icon-placeholder"})],-1),M={class:"album-info"},E={class:"album-title"},N={class:"album-singer"},U=g("歌手："),z={class:"album-time"},F={class:"album-company"},Y={key:0,class:"album-desc"},B=g("歌单简介"),G=v("i",{class:"iconfont icon-closed"},null,-1),H={key:0,class:"album-desc-all"},J={class:"detail-container"},K={class:"detail-main"},Q={class:"song-header"},R=g("包含歌曲列表 "),V=v("i",{class:"iconfont icon-audio-play"},null,-1),W=g(" 播放全部"),X={class:"album-comments",ref:"comment"},Z={class:"detail-aside"},ss={class:"aside-title"},as=g("全部>>"),ls={class:"aside-main aside-album-main"},is=v("div",{slot:"placeholder",class:"image-slot"},[v("i",{class:"iconfont icon-placeholder"})],-1),es={class:"aside-album-info"},ts={class:"aside-album-name"},os={class:"aside-album-time"};p();const cs=O(((s,a,l,i,e,t)=>{const o=y("el-image"),c=y("router-link"),n=y("song-list"),d=y("comment-list");return s.details?(f(),h("div",P,[v("div",C,[v("div",q,[v("div",T,[v(o,{src:s.details.picUrl},{default:O((()=>[x])),_:1},8,["src"])]),v("div",M,[v("div",E,[g(S(s.details.name)+" ",1),v("span",null,S("#"+s.details.type),1)]),v("div",N,[U,(f(!0),h(w,null,A(s.details.artists,((s,a)=>(f(),h(c,{to:{path:"/singer",query:{id:s.id}},class:"song_name",key:s.name},{default:O((()=>[g(S(0!==a?" / "+s.name:s.name),1)])),_:2},1032,["to"])))),128))]),v("div",z,"发行时间："+S(s.$utils.formartDate(s.details.publishTime,"yyyy-MM-dd")),1),v("div",F,"发行公司："+S(s.details.company),1),s.details.description?(f(),h("div",Y,[v("h5",null,[B,s.isShowDesc?(f(),h("em",{key:0,class:"desc-close",onClick:a[1]||(a[1]=a=>s.isShowDesc=!1)},[G])):D("",!0)]),v("p",{onClick:a[2]||(a[2]=(...s)=>i.showAllDesc&&i.showAllDesc(...s))},S(s.details.description),1),s.isShowDesc?(f(),h("pre",H,"                            "+S(s.details.description)+"\n                        ",1)):D("",!0)])):D("",!0)])]),v("div",J,[v("div",K,[v("div",Q,[v("h4",null,[R,v("em",null,S(s.details.size+"首歌"),1)]),v("span",{class:"play-all",onClick:a[3]||(a[3]=(...s)=>i.playAllSongs&&i.playAllSongs(...s))},[V,W]),v("span",{class:["collect",s.dynamic.isSub?"active":""],onClick:a[4]||(a[4]=(...s)=>i.subAlbum&&i.subAlbum(...s))},[v("i",{class:["iconfont","icon-collect"+(s.dynamic.isSub?"-active":"")]},null,2),g(" "+S(s.dynamic.isSub?"已收藏":"收藏"),1)],2)]),v(n,{songList:s.songList,stripe:!0},null,8,["songList"]),v("div",X,[v(d,{type:s.type,sId:s.albumId},null,8,["type","sId"])],512)]),v("div",Z,[v("h3",ss,[g(S(s.details.artists[0].name)+"的其他专辑",1),v(c,{to:{path:"/singer",query:{id:s.details.artists[0].id,type:"album"}},class:"album-more"},{default:O((()=>[as])),_:1},8,["to"])]),v("div",ls,[(f(!0),h(w,null,A(s.hotAlbums,(a=>(f(),h(c,{class:"aside-album-item",to:{path:"/album",query:{id:a.id}},key:a.id},{default:O((()=>[v(o,{src:a.picUrl},{default:O((()=>[is])),_:2},1032,["src"]),v("div",es,[v("div",ts,S(a.name),1),v("div",os,S(s.$utils.formartDate(s.details.publishTime,"yyyy-MM-dd")),1)])])),_:2},1032,["to"])))),128))])])])])])):D("",!0)}));$.render=cs,$.__scopeId="data-v-40b0f158";export default $;
