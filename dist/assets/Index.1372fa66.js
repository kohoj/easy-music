var E=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var F=(t,a,n)=>a in t?E(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,R=(t,a)=>{for(var n in a||(a={}))K.call(a,n)&&F(t,n,a[n]);if(z)for(var n of z(a))O.call(a,n)&&F(t,n,a[n]);return t},U=(t,a)=>G(t,J(a));import{_ as Q}from"./index.e9f38bbb.js";import{_ as W}from"./AlbumList.a7fbe126.js";import{p as T,a as q,e as d,o as l,f as i,g as e,F as v,h as b,i as m,w as N,j as L,b as X,c as Y,r as Z,d as x,x as ee,a8 as se,t as te,k as g,s as oe,m as ae}from"./vendor.a7e3494f.js";import{_ as ne}from"./PlayList.8a5604c7.js";import{_ as le}from"./MvList.a2d1f490.js";const M={props:{artistList:Array,num:Number,loading:Boolean},setup(){}},I=N();T("data-v-0625464e");const ie={class:"item"},re={class:"faceImg"},ce={class:"info"},de={class:"artist"},ue={class:"faceImg"},pe=e("div",{slot:"placeholder",class:"image-slot"},[e("i",{class:"iconfont icon-placeholder"})],-1),_e={class:"info"},me={class:"name"},ye={class:"albumSize"};q();const he=I((t,a,n,r,s,S)=>{const _=d("el-skeleton-item"),y=d("el-image"),h=d("router-link"),f=d("el-skeleton");return l(),i(f,{loading:n.loading,animated:"",throttle:500,count:n.num},{template:I(()=>[e("div",ie,[e("div",re,[e(_,{class:"ske-img",variant:"image"})]),e("div",ce,[e(_,{variant:"h3",class:"ske-name",style:{width:"50%"}}),e(_,{variant:"h5",class:"ske-txt"})])])]),default:I(()=>[e("div",de,[(l(!0),i(v,null,b(n.artistList,c=>(l(),i(h,{to:{path:"/singer",query:{id:c.id}},class:"item",key:c.id},{default:I(()=>[e("div",ue,[e(y,{src:c.picUrl+"?param=120y120"},{default:I(()=>[pe]),_:2},1032,["src"])]),e("div",_e,[e("div",me,m(c.name),1),e("div",ye,"\u4E13\u8F91\uFF1A"+m(c.albumSize),1)])]),_:2},1032,["to"]))),128))])]),_:1},8,["loading","count"])});M.render=he;M.__scopeId="data-v-0625464e";const B={components:{},props:{videoList:Array,num:Number,loading:Boolean},data(){return{}},computed:{},methods:{}},$=N();T("data-v-32c11f82");const ge={class:"item"},ve={class:"ske-info"},fe={class:"video"},ke=e("i",{class:"iconfont icon-play"},null,-1),$e=e("div",{slot:"placeholder",class:"image-slot"},[e("i",{class:"iconfont icon-placeholder"})],-1),be={class:"playCount"},Le=e("i",{class:"iconfont icon-video"},null,-1),Se={class:"v-time"},Ce={class:"info"};q();const Ie=$((t,a,n,r,s,S)=>{const _=d("el-skeleton-item"),y=d("el-image"),h=d("router-link"),f=d("el-skeleton");return l(),i(f,{loading:n.loading,animated:"",count:n.num,throttle:500},{template:$(()=>[e("div",ge,[e(_,{class:"ske-img",variant:"h3"}),e("div",ve,[e(_,{variant:"h3",class:"ske-name"}),e(_,{variant:"h4",class:"ske-txt",style:{width:"50%"}}),e(_,{variant:"h5",class:"ske-txt"})])])]),default:$(()=>[e("div",fe,[(l(!0),i(v,null,b(n.videoList,(c,C)=>(l(),i("div",{class:"item",key:""+c.id+C},[e(h,{to:{path:c.type?"/video":"/mv",query:{id:c.vid}},class:"faceImg"},{default:$(()=>[ke,e(y,{src:c.coverUrl},{default:$(()=>[$e]),_:2},1032,["src"]),e("span",be,[Le,e("em",null,m(t.$utils.formartNum(c.playTime)),1)]),e("div",Se,m(t.$utils.formatSongTime(c.durationms)),1)]),_:2},1032,["to"]),e("div",Ce,[e(h,{to:{path:"/video",query:{id:c.vid}},class:"v-name"},{default:$(()=>[L(m(c.title),1)]),_:2},1032,["to"]),(l(!0),i(v,null,b(c.creator,(k,o)=>(l(),i(h,{to:{path:"/user",query:{uid:k.userId}},class:"v-author",key:o},{default:$(()=>[L("By. "+m(o!==0?" / "+k.userName:k.userName),1)]),_:2},1032,["to"]))),128))])]))),128))])]),_:1},8,["loading","count"])});B.render=Ie;B.__scopeId="data-v-32c11f82";const H={name:"search",components:{SongList:Q,AlbumList:W,ArtistList:M,PlayList:ne,MvList:le,VideoList:B},setup(t){const a=X(),n=Y(),{proxy:r}=ae(),s=Z({keyVal:a.query.key,suggestInfo:{},listType:{songs:"\u5355\u66F2",artists:"\u6B4C\u624B",albums:"\u4E13\u8F91",playlists:"\u6B4C\u5355"},type:a.query.type||"1",history:[],list:[],total:0,offset:0,limit:30,currentpage:0,isShowSearch:!1,loading:!0}),S=x(()=>{const o={1:"\u9996\u5355\u66F2",10:"\u5F20\u4E13\u8F91",100:"\u4E2A\u6B4C\u624B",1e3:"\u4E2A\u6B4C\u5355",1002:"\u4E2A\u7528\u6237",1004:"\u4E2AMV",1014:"\u4E2A\u89C6\u9891",1018:"\u4E2A"};return s.total+o[s.type]}),_=async()=>{const{data:o}=await r.$http.serachSuggest({keywords:s.keyVal});if(o.code!==200)return r.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.suggestInfo=o.result},y=async()=>{const{data:o}=await r.$http.cloudsearch({keywords:s.keyVal,type:s.type,limit:s.limit,offset:s.offset});if(o.code!==200)return r.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.type==="1"?(s.list=o.result.songs.map(u=>({id:String(u.id),name:u.name,mvId:u.mv,singer:u.ar,album:u.al,alia:u.alia,vip:u.fee===1,license:u.license,duration:r.$utils.formatSongTime(u.dt),url:`https://music.163.com/song/media/outer/url?id=${u.id}.mp3`,publishTime:r.$utils.formatMsgTime(u.publishTime)})),s.total=o.result.songCount):s.type==="10"?(s.list=o.result.albums,s.total=o.result.albumCount):s.type==="100"?(s.list=o.result.artists,s.total=o.result.artistCount):s.type==="1000"?(s.list=o.result.playlists,s.total=o.result.playlistCount):s.type==="1004"?(s.list=o.result.mvs,s.total=o.result.mvCount):s.type==="1014"&&(s.list=o.result.videos,s.total=o.result.videoCount),s.loading=!1},h=o=>{!o||(s.keyVal&&s.keyVal!==a.query.key?(n.push({path:"/search",query:{key:o,type:s.type}}),s.isShowSearch=!1):(s.loading=!0,s.list=[],y()))},f=(o,u)=>{switch(s.keyVal=o.name,u){case"songs":n.push({path:"/song",query:{id:o.id}});break;case"artists":n.push({path:"/singer",query:{id:o.id}});break;case"albums":n.push({path:"/album",query:{id:o.id}});break;case"playlists":trouter.push({path:"/playlist/detail",query:{id:o.id}});break}s.isShowSearch=!1},c=()=>{s.keyVal?(s.suggestInfo={},_(),s.isShowSearch=!0):s.isShowSearch=!1},C=o=>{s.type=o,s.offset=0,s.currentpage=0,n.push({path:"/search",query:{key:s.keyVal,type:s.type}})},k=o=>{s.offset=(o-1)*s.limit,s.currentpage=o,y()};return ee(()=>{y()}),se(o=>{s.keyVal=o.query.key,s.type=o.query.type||"1",y()}),U(R({},te(s)),{searchInfo:S,currentChange:k,getListHandle:c,jumpSearch:h,jumpPage:f,selectType:C,searchInfo:S})}},V=N();T("data-v-4eefdc86");const we={class:"search"},Ve={class:"search-hd"},Te={class:"w1200"},qe={class:"search-box"},Ne={class:"search-key-list"},Me={class:"item-main"},Be=L(" -"),je=L(" -"),Ae={key:0,class:"search-history"},ze=e("span",null,"\u5386\u53F2\u641C\u7D22\uFF1A",-1),Fe={class:"w1200"},Re={class:"search-main"},Ue={class:"search-tab"},He=L("\u641C\u7D22\u7ED3\u679C"),Pe={class:"type"},De={class:"search-list"},Ee={class:"pagination"};q();const Ge=V((t,a,n,r,s,S)=>{const _=d("el-input"),y=d("el-popover"),h=d("song-list"),f=d("album-list"),c=d("artist-list"),C=d("play-list"),k=d("mv-list"),o=d("video-list"),u=d("el-pagination");return l(),i("div",we,[e("div",Ve,[e("div",Te,[e("div",qe,[e(y,{placement:"bottom-start",width:626,visible:t.isShowSearch,trigger:"manual"},{reference:V(()=>[e(_,{class:"search-inp",placeholder:"\u8BF7\u8F93\u5165\u6B4C\u540D\u3001\u6B4C\u8BCD\u3001\u6B4C\u624B\u6216\u4E13\u8F91",modelValue:t.keyVal,"onUpdate:modelValue":a[1]||(a[1]=p=>t.keyVal=p),onFocus:r.getListHandle,onInput:r.getListHandle,clearable:""},null,8,["modelValue","onFocus","onInput"])]),default:V(()=>[e("div",Ne,[(l(!0),i(v,null,b(t.suggestInfo.order,(p,P)=>(l(),i("div",{class:"search-item",key:P},[e("h6",null,m(t.listType[p]),1),e("div",Me,[(l(!0),i(v,null,b(t.suggestInfo[p],(w,D)=>(l(),i("div",{class:"list",key:D,onClick:j=>r.jumpPage(w,p)},[L(m(w.name)+" ",1),p==="songs"?(l(),i(v,{key:0},[Be,(l(!0),i(v,null,b(w.artists,(j,A)=>(l(),i("span",{key:A},m(j.name+(A!==0?" / ":"")),1))),128))],64)):p==="albums"?(l(),i(v,{key:1},[je,e("span",null,m(w.artist.name),1)],64)):g("",!0)],8,["onClick"]))),128))])]))),128))])]),_:1},8,["visible"]),e("i",{class:"iconfont icon-search",slot:"suffix",onClick:a[2]||(a[2]=oe(p=>r.jumpSearch(t.keyVal),["stop"]))}),t.history.length?(l(),i("div",Ae,[ze])):g("",!0)])])]),e("div",Fe,[e("div",Re,[e("div",Ue,[e("h2",null,[He,e("em",null,"("+m(r.searchInfo)+")",1)]),e("div",Pe,[e("span",{class:t.type==="1"?"active":"",onClick:a[3]||(a[3]=p=>r.selectType("1"))},"\u5355\u66F2",2),e("span",{class:t.type==="10"?"active":"",onClick:a[4]||(a[4]=p=>r.selectType("10"))},"\u4E13\u8F91",2),e("span",{class:t.type==="100"?"active":"",onClick:a[5]||(a[5]=p=>r.selectType("100"))},"\u6B4C\u624B",2),e("span",{class:t.type==="1000"?"active":"",onClick:a[6]||(a[6]=p=>r.selectType("1000"))},"\u6B4C\u5355",2),e("span",{class:t.type==="1004"?"active":"",onClick:a[7]||(a[7]=p=>r.selectType("1004"))},"MV",2),e("span",{class:t.type==="1014"?"active":"",onClick:a[8]||(a[8]=p=>r.selectType("1014"))},"\u89C6\u9891",2)])]),e("div",De,[t.type==="1"?(l(),i(h,{key:0,songList:t.list,stripe:!0,offset:t.offset},null,8,["songList","offset"])):g("",!0),t.type==="10"?(l(),i(f,{key:1,albumList:t.list,loading:t.loading,num:30},null,8,["albumList","loading"])):g("",!0),t.type==="100"?(l(),i(c,{key:2,artistList:t.list,loading:t.loading,num:30},null,8,["artistList","loading"])):g("",!0),t.type==="1000"?(l(),i(C,{key:3,playList:t.list,loading:t.loading,num:30},null,8,["playList","loading"])):g("",!0),t.type==="1004"?(l(),i(k,{key:4,mvList:t.list,loading:t.loading,num:30},null,8,["mvList","loading"])):g("",!0),t.type==="1014"?(l(),i(o,{key:5,videoList:t.list,loading:t.loading,num:30},null,8,["videoList","loading"])):g("",!0)]),e("div",Ee,[e(u,{onCurrentChange:r.currentChange,"current-page":t.currentpage,"page-size":t.limit,layout:"prev, pager, next",total:t.total},null,8,["onCurrentChange","current-page","page-size","total"])])])])])});H.render=Ge;H.__scopeId="data-v-4eefdc86";export{H as default};
