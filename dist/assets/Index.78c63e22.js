var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;import{_ as o}from"./PlayList.fa085941.js";import{p as c,a as n,o as p,f as d,w as y,g as m,b as u,c as f,r as b,d as g,x as v,y as h,t as T,e as _,a7 as k,F as x,h as O,i as w,j as L,k as j,q as C,m as P}from"./vendor.55e40976.js";const q={},$=y();c("data-v-53987e3f");const I={class:"loading"},M=m("div",{class:"loader"},null,-1);n();const D=$(((e,a,s,t,l,i)=>(p(),d("div",I,[M]))));q.render=D,q.__scopeId="data-v-53987e3f";const E={name:"PlayListWrap",components:{PlayList:o,Loading:q},setup(e){const{proxy:o}=P(),c=u(),n=f(),p=c.query.cat,d=b({sub:[],categories:[],curType:"",moreTxt:{},allList:{},playlist_list:[],playlist_count:20,playlist_loading:!0,busy:!0,params:{order:"hot",cat:p,limit:50,offset:0}}),y=async()=>{const{data:e}=await o.$http.catlist();if(d.sub=e.sub,200!==e.code)return o.$msg.error("数据请求失败");for(const a in e.categories){const s={name:e.categories[a]};s.children=d.sub.filter((e=>e.category===Number(a))),d.categories.push(s)}d.curType=p||e.all.name,d.allList=e.all,m()};g((()=>()=>["item-box","filter-more",moreTxt[index]?"active":""]));const m=()=>{const e=d.sub.find((e=>e.name===d.curType));if(d.moreTxt={},e){d.categories[e.category].children.indexOf(e)>=8&&(d.moreTxt[e.category]=e)}},_=async e=>{const{data:a}=await o.$http.playList(e);if(200!==a.code)return o.$msg.error("数据请求失败");d.playlist_list=0!==d.params.offset?[...d.playlist_list,...a.playlists]:a.playlists,d.busy=d.playlist_list.length>=a.total,d.playlist_loading=!1};return v((()=>{y(),_(d.params)})),h((()=>c.query),((e,a)=>{const{cat:s,order:t}=e;d.curType=s||d.allList.name,d.params=Object.assign({},{order:"hot",cat:"",limit:50,offset:0},{cat:s||"",order:t||"hot"}),m()})),h((()=>d.params),((e,a)=>{e.cat!==a.cat&&(d.busy=!0,d.playlist_list=[]),_(e)}),{deep:!0}),k=((e,a)=>{for(var s in a||(a={}))l.call(a,s)&&r(e,s,a[s]);if(t)for(var s of t(a))i.call(a,s)&&r(e,s,a[s]);return e})({},T(d)),a(k,s({getCatlist:y,selectType:e=>{n.push({path:"playlist",query:{cat:e.name,order:d.params.order}})},closed:()=>{n.push({path:"playlist"})},loadMore:()=>{d.busy=!0,d.params.offset=d.playlist_list.length},selectOrder:e=>{n.push({path:"playlist",query:{cat:d.params.cat,order:e}})}}));var k}},F=y();c("data-v-598b35f4");const N={class:"playlist"},S={class:"w1200"},W={class:"filter"},z={class:"filter-title"},A={class:"filter-box"},B=m("i",{class:"iconfont icon-arrow"},null,-1),G={key:1},H={class:"filter-drop"},J={class:"list-container"},K={class:"list-head"},Q=m("i",{class:"iconfont icon-closed"},null,-1),R={class:"type"},U={class:"wrapper infinite-list","infinite-scroll-disabled":"busy","infinite-scroll-distance":"100"};n();const V=F(((e,a,s,t,l,i)=>{const r=_("el-popover"),o=_("play-list"),c=_("Loading"),n=k("infinite-scroll");return p(),d("div",N,[m("div",S,[m("div",W,[(p(!0),d(x,null,O(e.categories,((a,s)=>(p(),d("div",{class:"filter-item",key:s},[m("div",z,w(a.name),1),m("div",A,[(p(!0),d(x,null,O(a.children.slice(0,8),(a=>(p(),d("span",{class:["item-box",e.curType===a.name?"active":""],key:a.name},[m("em",{onClick:e=>t.selectType(a)},w(a.name),9,["onClick"])],2)))),128)),m(r,{width:"auto",trigger:"click"},{reference:F((()=>[a.children.length>9?(p(),d("span",{key:0,class:["item-box","filter-more",e.moreTxt[s]?"active":""]},[m("em",null,[L(w(e.moreTxt[s]?e.curType:"更多"),1),B])],2)):(p(),d("span",G))])),default:F((()=>[m("div",H,[(p(!0),d(x,null,O(a.children.slice(9),(a=>(p(),d("span",{class:["item-box",e.curType===a.name?"active":""],key:a.name},[m("em",{onClick:e=>t.selectType(a,s)},w(a.name),9,["onClick"])],2)))),128))])])),_:2},1024)])])))),128))]),m("div",J,[m("div",K,[m("h2",null,[L(w(e.curType)+" ",1),e.curType!==e.allList.name?(p(),d("em",{key:0,class:"filter-close",onClick:a[1]||(a[1]=(...e)=>t.closed&&t.closed(...e))},[Q])):j("",!0)]),m("div",R,[m("span",{class:"hot"===e.params.order?"active":"",onClick:a[2]||(a[2]=e=>t.selectOrder("hot"))},"热门",2),m("span",{class:"new"===e.params.order?"active":"",onClick:a[3]||(a[3]=e=>t.selectOrder("new"))},"最新",2)])]),C(m("div",U,[m(o,{playList:e.playlist_list,loading:e.playlist_loading,num:e.playlist_count},null,8,["playList","loading","num"]),e.busy?(p(),d(c,{key:0})):j("",!0)],512),[[n,t.loadMore]])])])])}));E.render=V,E.__scopeId="data-v-598b35f4";export default E;
